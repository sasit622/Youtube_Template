!function(){"use strict";var e={};let t,n;function o(){if(n)return n;const e=document.head.getAttribute("data-info");return n=((/f:\s*([^;]+)/i.exec(e)||{})[1]||"").toLowerCase(),n}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){if(void 0!==e){const t=e.e,n={};e.e=function(o){return t(o).catch((function(t){const i=n.hasOwnProperty(o)?n[o]:2;if(1===i&&(e.p=e.p.replace("/assets.","/assets2.")),i<1)throw t;return new Promise((function(t){setTimeout((function(){n[o]=i-1,t(e.e(o))}),100)}))}))}}}(),function(){if(void 0!==e&&void 0!==e.tu){const t=e.tu;e.tu=function(e){return t(function(e){if("string"!=typeof e||"undefined"==typeof document)return e;const t=document.head.getAttribute("data-info");if(!(t.indexOf("ntp-afdh3t")>=0||t.indexOf("ntp-afdh3c")>=0))return e;const n="afdprotocol=";var o=document.cookie.split("; ").find((e=>0===e.indexOf(n)));if(o){const t=o.split("=");if(t[1])return e+(e.indexOf("?")<0?"?":"&")+n+t[1]}return e}(e))}}}();let i=new Map;const r=Object.freeze({set(e,t){return i.set(e,t),this},get:function(e,t){let n=i.get(e);return void 0===n&&t&&(n=t(),i.set(e,n)),n},clear(){i.clear()},delete:e=>i.delete(e),has:e=>i.has(e)});function a(){return!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv)}const s={bingHomepageMobile:"binghomepagemobile",outlookMobile:"OnOOutlookMobile",msnCopilot:"cp_msn_news",officeMobile:"OnOOfficeMobile",sapphire:"OnOStartApp",skype:"OnOSkype",freFullPage:"emmxFre",winWeatherApp:"weather-app-win",xiaomiApp:"xmweather-",launcher:"launcherntp",launcherInterests:"launcherInterests",swiftKey:"swiftKey",winMoneyApp:"finance-app-win"},c="superappdhp",d=["ios","android","ipados"],l="_ocidIsomorphicKey",u=()=>(r.get(l)||r.set(l,C("ocid").toLowerCase()),r.get(l)),h="_platformFlagKey",m="_hostAppNameKey",w="_clientTypeKey",f=()=>(r.get(h)||r.set(h,C("chpltfm")),r.get(h)),v=()=>{if(!r.get(m)){const e=f();r.set(m,e.toLowerCase().split("-")[0])}return r.get(m)},p=()=>{if(!r.get(w)){const e=f();r.set(w,e.toLowerCase().split("-")[1])}return r.get(w)};function g(){if(!a()||k())return!1;const e=window.sapphireWebViewBridge,t=window.webkit,n=e&&e.send,o=t&&t.messageHandlers&&t.messageHandlers.send&&t.messageHandlers.send.postMessage;return!(!n&&!o)}function y(){const e=f()&&"outlook"===v()&&d.includes(p()),t=u()===s.outlookMobile.toLowerCase();return e||t}function b(){const e=f()&&["office","union"].includes(v())&&d.includes(p()),t=u()===s.officeMobile.toLowerCase();return e||t}function S(){const e=u()===s.skype.toLowerCase()||"skype"===v();return a()&&(null===(t=window.skypeWebviewBridge)||void 0===t?void 0:t.isSkype)||e;var t}function T(){return!(!a()||k())&&(g()||u()===s.sapphire.toLowerCase()||u()===c.toLowerCase())}function x(){const e=C("edge");return("emmx"===v()||"1"===e)&&T()||"mmx"===u()}function E(){return"3rdp"===v()||u().startsWith(s.xiaomiApp)||k()}function R(){return[s.launcher.toLowerCase(),s.launcherInterests.toLowerCase()].includes(u())&&T()}function k(){return u().toLowerCase()===s.swiftKey.toLowerCase()||"swiftkey"==v().toLowerCase()}function A(){return-1!==window.location.href.indexOf("huawei")||-1!==window.location.href.indexOf("airfind")||-1!==window.location.href.indexOf("aloha")||"vivo"===u()&&E()}!function(e){let t,n=!1;const o=function(){return n||(n=!0,t=e()),t};o.cache={clear:()=>{n=!1,t=void 0}}}((()=>g()||S()||b()||y()||T()||u()===s.winWeatherApp.toLowerCase()||u()===s.winMoneyApp.toLowerCase()||x()||E()||R()||k()||A()||-1!==window.location.href.indexOf("metaos=true")));function C(e){try{return new URL(location.href).searchParams.get(e)||""}catch(e){return""}}function N(){var e,t;return(null===(e=window)||void 0===e||null===(e=e.__SSRUserConfigEarlyLog)||void 0===e?void 0:e.consistentMuid)||(null===(t=window)||void 0===t?void 0:t.__muid)||""}function L(e){try{return decodeURIComponent(e)}catch(e){}}let M,q;function O(e,t){if(!e)return null;if(t)return function(e){var t;const n=null===(t=document.cookie)||void 0===t?void 0:t.match(`\\b${e}=([^;]*)`);return n?L(n[1]):null}(e);if(!M){const e="undefined"!=typeof document&&document.cookie.split("; ");M={};const t=e&&e.length;for(let n=0;n<t;n++){const t=e[n].indexOf("=");M[e[n].slice(0,t).toLocaleLowerCase()]=L(e[n].slice(t+1))}}const n=e.toLocaleLowerCase();return M[n]||null}var I;!function(e){e[e.Alert=0]="Alert",e[e.Deprecated=1]="Deprecated",e[e.HighImpact=2]="HighImpact",e[e.Critical=3]="Critical"}(I||(I={}));const D=new class{constructor(e=20){this.maxLength=e,this.list=[]}push(e){this.list.push(e),this.list.length>this.maxLength&&this.list.shift()}get data(){return this.list}};function _(e,n,i,r=I.Alert,s,c,d){try{const l=function(){if(!t){const e=document.head.getAttribute("data-client-settings");e&&(t=JSON.parse(e))}return t}(),u=o(),h=function(e){if(e){const{pcsInfo:t,pageGenTime:n}=e,o=new Date(n).getTime(),i=!t||["prod","prod-ssr","prod-ssrntp"].includes(t.env);q=i?"browser.events.data.msn.com":"events-sandbox.data.msn.com";return{cors:"true","content-type":"application/x-json-stream","client-id":"NO_AUTH","client-version":"1DS-Web-JS-2.2.2",apikey:i?"0ded60c75e44443aa3484c42c1c43fe8-9fc57d3f-fdac-4bcf-b927-75eafe60192e-7279":"f8857dedc6f54ca8962cfb713e01e7d7-e9250191-fe0b-446f-95ae-07516262f98c-7028","upload-time":o,w:"0",anoncknm:"app_anon"}}return null}(l);let m="";h&&h.apikey&&""!==h.apikey&&(m=function(e){if(e){const t=e.indexOf("-");if(t>0)return e.substring(0,t)}return""}(h.apikey));const w=function(e,t,n,o,i,r,s=I.Alert,c=""){if(n){i=i||{};const{apptype:l,audienceMode:u,pagetype:h,pageGenTime:m,bundleInfo:w,deviceFormFactor:f="",fd_muid:v,os:p}=n;i.pageGenTime=m,i.build=w&&w.v,i.appType=l;const g=function(e,t,n){const o=n&&"phone"===n.toLowerCase(),i=t&&"enterprise"===t;let r="Edge";k()?r="swiftKey":R()?r="Launcher":function(){var e;if(!a())return!1;const t=document.head.dataset.clientSettings||(null===(e=document.getElementsByClassName("peregrine-widget-settings")[0])||void 0===e?void 0:e.getAttribute("data-client-settings"));if(t){const e=JSON.parse(t);return e&&e.pagetype&&"bingHomepageMobile"===e.pagetype}return!1}()&&(r="bingHomepageMobile");return{bingHomepage:"binghomepage",mmx:"emmx",edge:"spartan",edgeChromium:i?"entnews":"anaheim",hybrid:"spartan",hub:o?"prime_mobile":"prime",microsoftNews:"msnews",office:"entnews",views:o?"prime_mobile":"prime",homePage:o?"prime_mobile":"prime",windowsShell:"windowsshell",edgeMobile:r}[e]}(l,u,f),y=g||l,b=document.getElementsByTagName("html")[0].getAttribute("lang");let S,T="",x="muid";try{if("edgeChromium"===l&&"object"==typeof window&&window.location&&window.location.search){const e=new URLSearchParams(window.location.search);S=e.has("startpage")?"msedgdhp":"msedgntp","enterprise"===u?S="entnewsntp":"xbox"===p&&(S="xboxntp")}window&&window.getCookieConsentRequired&&"function"==typeof window.getCookieConsentRequired&&window.getCookieConsentRequired()||(T=N()||O("muid"))}catch{}T||(T=n.aid,x="aid");const E={name:"MS.News.Web.AppError",time:m,ver:"4.0",iKey:`o:${o}`,data:{baseData:{},baseType:"MS.News.Web.Base",page:{name:"default",product:y,type:U(h),content:P[l]??{category:"standaloneError"},ocid:S},browser:{clientId:T,clientIdType:x},flight:{id:r,tmpl:c},request:{activityId:n.aid,requestId:n.aid,afdMuid:v},locale:{mkt:b},extSchema:{id:e,severity:s,pb:i,message:t}}};var d;if(T&&"muid"===x)E.ext={...null==E?void 0:E.ext,user:{...null==E||null===(d=E.ext)||void 0===d?void 0:d.user,localId:`t:${T}`}};return"object"==typeof window&&(window.isSSREnabled&&(E.data.flight.tmpl+=";ssr-enabled:1"),window.isSSRCompleted&&(E.data.flight.tmpl+=";ssr-completed:1")),E?JSON.stringify(E):null}return null}(n,e,l,m,i,u,r,d);if(c&&!function(e){if(null==e)return!1;return e.startsWith("1")||e.startsWith("2")||e.startsWith("3")||e.startsWith("4")}(null==l?void 0:l.aid))return console.error(w),void console.error(`This App error Id: ${n} will not be sent due to app error sampling!`);if(h&&w){console.error(w),D.push(w);const e="https://"+q+"/OneCollector/1.0"+function(e){return"?"+Object.keys(e).map((function(t){return t+"="+encodeURIComponent(e[t])})).join("&")}(h);if(s&&!performance.getEntriesByType("visibility-state").some((e=>"visible"===e.name))){const t=()=>{"visible"===document.visibilityState&&navigator.sendBeacon(e,w)};document.addEventListener("visibilitychange",t,{once:!0})}else navigator.sendBeacon(e,w)}}catch{}}const P={homePage:{vertical:"homepage",category:"",id:"",domainId:"13041",title:"undefined"!=typeof document?document.title:""}};function U(e){let t=e;switch(e){case"windowsshellhp":t="dhp";break;case"video":t="watch";break;case"EdgeMobile":t=x()?"ntp":"dhp"}return t}class H extends HTMLElement{connectedCallback(){var e;if((null===(e=this.previousSibling)||void 0===e?void 0:e.nodeType)!==Node.COMMENT_NODE)return;const t=this.previousSibling.data;if(""!==t)try{this.jsonData=JSON.parse(t)}catch(e){_("Error parsing JSON from Comment Node",34029,{data:t,error:null==e?void 0:e.message,tagName:this.tagName})}finally{this.previousSibling.data=""}}}(()=>{var e;customElements.get("fast-ssr-style")||customElements.define("fast-ssr-style",((e=class e extends H{connectedCallback(){super.connectedCallback();const t=this.getAttribute("style-ids"),n=this.getRootNode();t&&(this.addToCache(),t.split(",").forEach((t=>{const o=e.styleCache.get(t);try{n.adoptedStyleSheets.push(o)}catch(e){_("Error setting adoptedStyleSheets",34030,{id:t,sheet:o,error:null==e?void 0:e.message})}}))),this.remove()}addToCache(){this.jsonData&&Object.keys(this.jsonData).forEach((t=>{const n=this.createStyleSheet(t);n&&e.styleCache.set(t,n)}))}createStyleSheet(e){const t=new CSSStyleSheet,n=this.jsonData[e];try{return t.replace(n),t}catch(t){_("Error creating CSSStyleSheet",34030,{key:e,styles:n,error:null==t?void 0:t.message})}}}).styleCache=new Map,e));customElements.get("ttsr-marker")||customElements.define("ttsr-marker",class extends HTMLElement{constructor(e=Math.round(performance.now())){super(),this.initTime=e}connectedCallback(){const e=this.dataset.name;e&&(window.markTTSR(e,this.initTime),"true"===this.dataset.emitEvent&&window.dispatchEvent(new Event(e)),this.remove())}}),customElements.get("ssr-data-from-template")||customElements.define("ssr-data-from-template",class extends HTMLElement{connectedCallback(){const e=this.dataset.d;if(e)try{const t=JSON.parse(e);if(!t)return;Object.keys(t).forEach((e=>{window[e]=t[e]}))}catch(t){_("Error parsing JSON from SSRDataFromTemplate component",34029,{data:e,error:null==t?void 0:t.message,tagName:this.tagName})}finally{this.remove()}}}),customElements.get("ssr-data")||customElements.define("ssr-data",class extends H{connectedCallback(){super.connectedCallback(),this.jsonData&&(Object.keys(this.jsonData).forEach((e=>{window[e]=this.jsonData[e]})),this.remove())}}),customElements.get("ssr-sugi-data")||customElements.define("ssr-sugi-data",class extends H{connectedCallback(){if(super.connectedCallback(),!this.jsonData)return;const e=this.getRootNode().host;Object.keys(this.jsonData).forEach((t=>{e[t]=this.jsonData[t]})),this.remove()}}),customElements.get("ssr-func-exp")||customElements.define("ssr-func-exp",class extends H{connectedCallback(){super.connectedCallback();const e=window[this.dataset.fnName];e&&"function"==typeof e&&e(this.jsonData),this.remove()}})})();const j="1.0.21";let B,$,V;(new Date).getTime();try{$="sessionStorage"in window&&window.sessionStorage}catch(e){}try{navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&navigator.userAgentData.getHighEntropyValues&&navigator.userAgentData.getHighEntropyValues(["platformVersion"])&&navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then((e=>{V=e.platformVersion}))}catch(e){}function W(e){if(e)return e.scrollTop||0;return F&&(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop)||0}function J(){const e="undefined"!=typeof document&&document.cookie;if(!F&&!e)return"";const t=new RegExp("\\bMUID\\s*=\\s*([^;]*)","i").exec(e);return t&&t.length>1?t[1]:""}const F=!("undefined"==typeof window||!window.document||!window.document.createElement||window.isRenderServiceEnv);function G(){let e=!1;if(F)try{if(V&&parseInt(V.split(".")[0])>=11&&(e=!0),!e&&window&&window.external&&window.external.getHostEnvironmentValue("os-build")){const t=JSON.parse(window.external.getHostEnvironmentValue("os-build"))["os-build"].split(".");(t[0]>10||10===t[0]&&t[1]>0||t[2]>=22e3)&&(e=!0)}}catch(e){}return B=!0===e||null,B}const z="1.0.21";var K;!function(e){e.JSON="application/json;charset=UTF-8",e.HTML="text/html;charset=UTF-8"}(K=K||(K={}));function Y(){const e=performance.getEntriesByType("navigation")[0].serverTiming;if(e){const t=e.find((e=>"rsClusterName"===e.name));if(t)return t.description}}var X;let Z;const Q=JSON.parse((null===(X=document.head.dataset)||void 0===X?void 0:X.clientSettings)||"{}");let ee={};function te(e){ee=e}let ne,oe=()=>"";function ie(e){ee.integration={...ee.integration,joinIds:JSON.stringify(e)}}function re(e,t,n){var o,i,r,a,s;const c=N()||J(),d=ee||{},l=n||{};let u=d.custom;if(u)try{u=JSON.parse(u)}catch(e){}return{name:e,time:t.toISOString(),ver:"4.0",iKey:`o:${null===(o=window.oneDSConfig)||void 0===o||null===(o=o.key)||void 0===o?void 0:o.split("-")[0]}`,data:{...d,baseType:"MS.News.Web.Base",baseData:{},page:{...d.page,canvas:"Browser",appType:Q.apptype,content:{...null===(i=d.page)||void 0===i?void 0:i.content,title:document.title},config:ne??(null===(r=d.page)||void 0===r?void 0:r.config)},flight:{tmpl:`ssr-enabled:1;${window._sugi?"sugi:1;":""}edge.mem:${navigator.deviceMemory+""};edge.concurrency:${navigator.hardwareConcurrency+""};edge.connection:${(null===(a=navigator.connection)||void 0===a?void 0:a.effectiveType)+""};${oe()}`},browser:{width:window.outerWidth,height:window.outerHeight,screenSize:[screen.width,screen.height].join("x"),clientId:c,scrollOffset:W(),anoncknm:"app_anon",cookieEnabled:navigator.cookieEnabled,isWin11:G(),muid:c},request:{activityId:Q.aid,requestId:Z||Q.aid,afdMuid:Q.fd_muid,tier:Q&&Q.detection&&Q.detection.tier?Q.detection.tier:""},timestamp:t.getTime(),sdk:{name:"peregrine-lite-telemetry",ver:z,schemaVer:j},build:null===(s=Q.bundleInfo)||void 0===s?void 0:s.v,custom:{...u,...l,"rs-cluster-name":Y(),"ssr-enabled":1}},ext:{user:{localId:`t:${c}`}}}}const ae="sign-in-active",se="sign-in-pending",ce="sign-in-refreshed-page",de="sign-in-refresh-session";function le(){return a()?window._pageTimings||(window._pageTimings={}):r.get("__diagnostics_pageTimings",(()=>({})))}const ue="MUID";const he="__RequestDataInstance__";class me{constructor(e,t){if(this.url=new URL(e.href),this.innerHeight=e.innerHeight,this.devicePixelRatio=e.devicePixelRatio,this.canUseCssGrid=e.canUseCssGrid,this.requestId=e.requestId,this.cookie=e.cookie,this.referer=e.referer,this.userAgent=e.userAgent,this.clientData=e.clientData,this.oneServiceHeaders=function(e){try{if(e)return JSON.parse(e)}catch(e){}}(e.oneServiceHeaders)||{},this.isPssrMode=t,t){const e=we("OSATE",this.cookie),t=!!e&&"1"===e,n=we("OSAT",this.cookie);if(t&&n||!e&&!n)return this.msalAuthReady=!0,void(n&&(this.oneServiceHeaders.Authorization=`Bearer ${n}`));this.msalAuthReady=!1,this.pssrRejectedReason=e&&!t?"interactiveLogin":e&&!n?"missOSAT":"missOSATE"}}static getInstance(){const t=r.get(he);return t||(e.g.TEST_ENV?fe({href:"http://localhost:8080/",innerHeight:768,devicePixelRatio:1,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:""}):fe({href:"http://localhost:8080/",innerHeight:0,devicePixelRatio:0,canUseCssGrid:!1,requestId:"0",cookie:"",userAgent:"",referer:"",oneServiceHeaders:""}))}static resetInstance(e,t=!1){const n=new me(e,t);return r.set(he,n),n}}function we(e,t){if(t&&e){const n=new RegExp("\\b"+e+"\\s*=\\s*([^;]*)","i").exec(t);return n&&n.length>1?n[1]:null}return null}const fe=me.resetInstance,ve=()=>me.getInstance();function pe(e){return function(e,t){if(e){const n=new RegExp("\\b"+t+"\\s*=\\s*([^;]*)","i").exec(e);return n&&n.length>1?n[1]:null}return null}(a()?window.document.cookie:ve().cookie,e)}var ge,ye;!function(e){e.Lax="lax",e.Strict="strict",e.None="none"}(ge||(ge={})),function(e){e.High="High",e.Medium="Medium",e.Low="Low"}(ye||(ye={}));const be="ntp.user_nurturing",Se="user_muid",Te=6,xe=0,Ee=new Date("2010-01-01Z"),Re=192,ke=16383,Ae=240,Ce=192,Ne=63,Le="MUID";let Me=!1,qe=[];function Oe(){const e=Ee,t=new Date;let n=-1;return(t.getDay()!=e.getDay()||t.getMonth()!=e.getMonth()||t.getFullYear()!=e.getFullYear())&&(n=Math.floor(Math.abs(t.getTime()-e.getTime())/864e5),n>ke)?0:n}function Ie(e){let t=!0;if(32!=(null==e?void 0:e.length))return{isMuidValid:!1};const n=new Uint8Array(function(e){const t=[],n=[6,4,2,0,10,8,14,12,16,18,20,22,24,26,28,30];for(const o of n){const n=e.slice(o,o+2);t.push(parseInt(n,16))}return new Uint8Array(t)}(e));if(n.forEach((e=>{isNaN(e)&&(t=!1)})),!t)return{isMuidValid:!1};if(function(e){[e[0],e[3]]=[e[3],e[0]],[e[1],e[2]]=[e[2],e[1]],[e[4],e[5]]=[e[5],e[4]],[e[6],e[7]]=[e[7],e[6]]}(n),0!=(n[0]&Re))return{isMuidValid:!1};if((n[6]&Ae)!=Te<<4)return{isMuidValid:!1};if((n[8]&Ce)!=xe<<6)return{isMuidValid:!1};const o=new Uint8Array(n);!function(e){!function(e){const t=e.length>>1;for(let n=0;n<t;n++)e[n+t]^=e[n]}(e)}(o);const i=function(e){const t=new Uint8Array([0]);for(let n=0;n<e.length-1;n++)t[0]+=e[n];return t[0]}(o);if(i!=o[15])return{isMuidValid:!1};let r=0;r|=(o[10]&Ne)<<8,r|=o[11];Oe();return r>Oe()+1?{isMuidValid:!1}:{dateCreated:r,isMuidValid:t}}function De(e,t){const n=new Date;n.setTime(n.getTime()+31536e6);return`MUID=${e};expires=${n.toUTCString()};domain=${t};path=/;SameSite=${ge.None};Secure;priority=${ye.High};`}async function _e(e="",t=Ue,n=Pe,o=Le){const i=Date.now();window.muidActionRecord={isMuidReverted:!1,muidRevertedFrom:"",signInPerfCost:0,perfCost:0,isRefreshMuidError:!1};try{if("psl"===e&&await Promise.race([new Promise((e=>{var t;null!==(t=window)&&void 0!==t&&null!==(t=t.chrome)&&void 0!==t&&null!==(t=t.authPrivate)&&void 0!==t&&t.getPrimaryAccountInfo?window.chrome.authPrivate.getPrimaryAccountInfo((t=>{e(!t||""===t.account_id)})):e(!0)})),new Promise((e=>{setTimeout((()=>{e(!0)}),50)}))]))return;window.muidActionRecord.signInPerfCost=Date.now()-i;const r=pe(ue)||"",a=await t(o,(e=>{var t;return e&&(null===(t=Ie(e))||void 0===t?void 0:t.isMuidValid)}),e);a!==r&&function(e,t,n,o){if(e){const i=window.location.hostname.toLowerCase().endsWith(".cn")?".msn.cn":".msn.com",{isMuidValid:r,dateCreated:a}=Ie(e),{isMuidValid:s,dateCreated:c}=Ie(t);if(!r&&s)return void n(o,t);if(r&&!s)return window.document.cookie=De(e,i),window.muidActionRecord.isMuidReverted=!0,void(window.muidActionRecord.muidRevertedFrom=t);if(void 0!==a&&void 0!==c)a<=c?(window.document.cookie=De(e,i),window.muidActionRecord.isMuidReverted=!0,window.muidActionRecord.muidRevertedFrom=t):n(o,t)}else n(o,t)}(a,r,n,o),window.muidActionRecord.perfCost=Date.now()-i}catch(e){window.muidActionRecord.isRefreshMuidError=!0}}const Pe=(e,t)=>{window.localStorage.setItem(e,t),Me&&function(e,t,n){const o=e.findIndex((e=>(null==e?void 0:e.key)===t));if(o>-1)e[o]={...e[o],value:n};else{const o={key:t,value:n};e.push(o)}window.chrome.ntpSettingsPrivate.setPref(be,e)}(qe,Se,t)},Ue=async(e,t,n)=>{var o;Me=!(null===(o=window.chrome)||void 0===o||null===(o=o.ntpSettingsPrivate)||void 0===o||!o.getPref)&&"psl"===n;let i=window.localStorage.getItem(e)||"";if(!i&&Me){qe=await function(e){return new Promise(((t,n)=>{window.chrome.ntpSettingsPrivate.getPref(e,(function(e){e&&e.value?t(e.value):t([])}))}))}(be);const e=(qe||[]).find((e=>e.key===Se));i=(null==e?void 0:e.value)||""}return i};let He;const je="data-t";let Be=e=>{try{const t=function(){var e,t;if(null===(e=window.oneDSConfig)||void 0===e||!e.endpoint)throw new Error("1DS endpoint not found");const n=new URL(window.oneDSConfig.endpoint);return n.searchParams.append("cors","true"),n.searchParams.append("content-type","application/x-json-stream"),n.searchParams.append("client-id","NO_AUTH"),n.searchParams.append("client-version",`peregrine-lite-telemetry-${null===(t=Q.bundleInfo)||void 0===t?void 0:t.v}`),window.oneDSConfig.key&&n.searchParams.append("apikey",window.oneDSConfig.key),n.searchParams.append("upload-time",Date.now().toString()),n.searchParams.append("w","0"),n.searchParams.append("anoncknm","app_anon"),n.searchParams.append("NoResponseBody","true"),n}();navigator.sendBeacon(t,JSON.stringify(e))}catch(e){_("Error sending Lite Telemetry",34019,{error:e.message})}};let $e=!0,Ve=!0;async function We(e,t){if(Ve&&ze())return;"none"!==t&&await _e(t),window.__peregrine_litePVSent=!0;const n=re("MS.News.Web.PageView",new Date,e),o=()=>{le().TimeToSendPageView=Math.round(performance.now()),Be(n)};$e?(He||(He=new Promise((e=>{"visible"===document.visibilityState&&e(),document.addEventListener("visibilitychange",(function t(){"visible"===document.visibilityState&&(e(),document.removeEventListener("visibilitychange",t))}))}))),He).then(o):o()}const Je=e=>{const t=[];let n=e;for(;n&&n!==document.body;)t.unshift(`${n.tagName.toLowerCase()}${n.id?"#"+n.id:""}${n.className?"."+n.className.replace(/\s+/g,"."):""}`),n=Ze(n);return t.join(" > ")};function Fe(e,t){if(e)try{const n=re("MS.News.Web.PageAction",new Date);n.data.actionType=t,["click","rightclick"].includes(t)&&(n.data.gesture=t);const o=Xe(e);if(o){if("search_websearch"===o.n)return;if("submit"!==t&&["headersearch","searchinput"].includes(o.n))return;n.data.behavior=o.b,n.data.object={name:o.n,type:o.t,content:{id:o["c.i"],type:o["c.t"],headline:o["c.hl"],vertical:o["c.v"],brandId:o["c.bi"],category:o["c.c"]},ext:o.ext,destinationUrl:e.getAttribute("action")||e.getAttribute("destination-url")||e.href||""};let i=o.n||"",r=Ze(e);for(;r&&r!==document.body;){const e=Xe(r);null!=e&&e.n&&(i=`${e.n}>${i}`),r=Ze(r)}n.data.object.placement={lineage:i},i||_("Empty lineage in Lite Action Telemetry",34020,{elementPath:Je(e),elementType:null==e?void 0:e.tagName,actionType:t})}else if("click"===t)return;Be(n)}catch(n){_("Error sending Lite Action Telemetry",34019,{error:n.message,stack:n.stack,elementPath:Je(e),elementType:null==e?void 0:e.tagName,actionType:t})}}function Ge(e,t=!1){try{if("auxclick"===e.type&&1!==e.button)return;const n=Ke(e),o=n&&function(e){const t=20;for(let o=0;o<t&&e&&!Ye(e);o++){var n;e=e.assignedSlot||e.parentElement||(null===(n=e.parentNode)||void 0===n?void 0:n.host)}if(!Ye(e))return;return e}(n);if(o){const n=e.type;Fe(o,Qe[n]||"click"),t&&e.preventDefault()}}catch(t){var n;let o;try{o=Ke(e)}catch(e){}_("Error sending Click Event Telemetry",34019,{error:t.message,stack:t.stack,type:e.type,button:e.button,elementPath:o&&Je(o),elementType:null===(n=o)||void 0===n?void 0:n.tagName})}}function ze(){try{return sessionStorage.getItem(ae)||sessionStorage.getItem(se)||sessionStorage.getItem(ce)||sessionStorage.getItem(de)}catch(e){return!1}}function Ke(e){if(e){if(!e.composedPath||"function"!=typeof e.composedPath)return e.target;{const t=e.composedPath();if(t.length>2&&"hasAttribute"in t[0]&&!t[0].hasAttribute(je)&&"[object ShadowRoot]"===Object.prototype.toString.call(t[1])&&"hasAttribute"in t[2]&&t[2].hasAttribute(je))return t[2];if(t.length>0)return t[0]}}}function Ye(e){var t;if(!e)return!1;if("BUTTON"===e.nodeName||null!==(t=e.hasAttribute)&&void 0!==t&&t.call(e,"href")||e.getAttribute&&"button"===e.getAttribute("role")||e.form)return!0;const n=Xe(e);return n&&(5===n.t||11===n.t||n.b&&e.tagName.includes("-"))}function Xe(e){try{const t=e.getAttribute(je);return t&&JSON.parse(t)}catch(e){_("Error parsing telemetry attribute",34019,{error:e.message})}}function Ze(e){var t;return e.assignedSlot||e.parentElement||(null===(t=e.parentNode)||void 0===t?void 0:t.host)}const Qe={auxclick:"middleclick",contextmenu:"rightclick"};let et=(new Date).getTime();const tt=e=>{const t=(et+16*Math.random())%16|0;return et=Math.floor(et/16),("x"===e?t:7&t|8).toString(16)},nt=()=>"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,tt),ot=()=>{const e=performance.getEntriesByType("navigation");if(!e||!e.length)return!1;const t=e[0]&&e[0].serverTiming;return!(!t||!t.length)&&!!t.find((e=>e&&"cache"===e.name))};const it=e=>{Ge(e)},rt=e=>{e.target&&Fe(e.target,"submit")};class at{constructor(e=-1){this._published=[],this._subscribers=[],this.maxSize=e}publish(e){this.maxSize>0&&this._published.length>=this.maxSize&&this._published.shift(),this._published.push(e),this._subscribers.forEach((t=>t(e)))}subscribe(e){return this._subscribers.push(e),this._published.forEach((t=>e(t))),{dispose:()=>{this._subscribers=this._subscribers.filter((t=>t!==e))}}}bulkPublish(e){e.forEach((e=>this.publish(e)))}}function st(e){const t=performance.getEntriesByType("visibility-state").filter((t=>t.startTime<e));if(0===t.length)return e;let n=0;for(let i=0;i<t.length;i++){const r=t[i];var o;if("visible"===r.name)n+=((null===(o=t[i+1])||void 0===o?void 0:o.startTime)??e)-r.startTime}return n}const ct=["vendors","microsoft","common","experience"];function dt(){window.markTTSR=(e,t)=>{window._pageTimings[`${e}-Init`]=t||Math.round(performance.now()),requestAnimationFrame((()=>{window._pageTimings[`${e}-RAF`]=st(Math.round(performance.now())),setTimeout((()=>{var t;window._pageTimings[e]=st(Math.round(performance.now())),"TTSR.Complete"==e&&(t=10,Math.floor(101*Math.random())<=t)&&function(){var e;const t=null===(e=window)||void 0===e||null===(e=e.performance)||void 0===e?void 0:e.getEntriesByType("long-animation-frame");if(!t)return;window._longAnimationFrames=[],t.forEach((e=>{const t=e;t.scripts&&t.scripts.length>0&&t.scripts.forEach((e=>{for(let n=0;n<ct.length;n++)if(e.sourceURL.includes(ct[n])){window._longAnimationFrames.push({sourceURL:e.sourceURL,blockingDuration:t.blockingDuration});break}}))}))}()}))}))}}var lt;!function(e){e.visibility="visibility",e.adServed="adserved",e.click="click"}(lt||(lt={}));const ut=["control icon-only","menu","ad-label","ad-choice"],ht="cs-personalized-feed";function mt(){const e=null===(t=document.querySelector("edge-chromium-page"))||void 0===t||null===(t=t.shadowRoot)||void 0===t||null===(t=t.querySelector("grid-view-feed"))||void 0===t||null===(t=t.shadowRoot)||void 0===t||null===(t=t.querySelector("cs-super-container"))||void 0===t||null===(t=t.shadowRoot)||void 0===t||null===(t=t.querySelector(ht))||void 0===t||null===(t=t.shadowRoot)||void 0===t?void 0:t.querySelector("cs-feed-layout");var t,n;return e||(null===(n=document.querySelector("edge-chromium-page"))||void 0===n||null===(n=n.shadowRoot)||void 0===n||null===(n=n.querySelector("waterfall-view-feed"))||void 0===n||null===(n=n.shadowRoot)||void 0===n||null===(n=n.querySelector("cs-super-container"))||void 0===n||null===(n=n.shadowRoot)||void 0===n?void 0:n.querySelector("cs-responsive-feed-layout"))}function wt(e,t){var n;return(null==e||null===(n=e.shadowRoot)||void 0===n?void 0:n.querySelectorAll(t))||[]}function ft(e,t,n,o){var i;if(!o)return null===(i=e[n])||void 0===i||null===(i=i.shadowRoot)||void 0===i?void 0:i.querySelector(`#${t}`);for(let n=0;n<(null==e?void 0:e.length);n++){var r,a,s,c,d;if("cs-native-ad-card"===(null===(r=e[n])||void 0===r?void 0:r.localName)||"cs-native-ad-card-bi"===(null===(a=e[n])||void 0===a?void 0:a.localName)||"cs-native-ad-card-with-cta"===(null===(s=e[n])||void 0===s?void 0:s.localName)||"cs-native-ad-card-va-phase2"===(null===(c=e[n])||void 0===c?void 0:c.localName)||"cs-native-ad-card-default"===(null===(d=e[n])||void 0===d?void 0:d.localName)){var l;const o=null===(l=e[n])||void 0===l||null===(l=l.shadowRoot)||void 0===l||null===(l=l.querySelector("cs-card"))||void 0===l||null===(l=l.querySelector("cs-content-card"))||void 0===l?void 0:l.getAttribute("data-t");if(o&&o.includes(t))return e[n]}else{var u;const o=null===(u=e[n])||void 0===u?void 0:u.getAttribute("data-t");if(o&&o.includes(t))return e[n]}}}function vt(){var e;if(!window.isSSRCompleted)return;const t=mt(),n=!(null===(o=document.querySelector("edge-chromium-page"))||void 0===o||null===(o=o.shadowRoot)||void 0===o||!o.querySelector("waterfall-view-feed"));var o;const i=function(e){var t;if("CS-RESPONSIVE-FEED-LAYOUT"===(null==e?void 0:e.tagName)){const t=[];let n=wt(e,"cs-native-ad-card, cs-native-ad-card-bi, cs-native-ad-card-with-cta, cs-native-ad-card-va-phase2, cs-native-ad-card-default");return n.length>0?n:(n=wt(e,"cs-responsive-card"),n.forEach((e=>{var n;null!=e&&null!==(n=e.id)&&void 0!==n&&n.startsWith("nativead")&&t.push(e)})),t)}return(null==e||null===(t=e.shadowRoot)||void 0===t?void 0:t.querySelectorAll("cs-native-ad-card, cs-native-ad-card-bi, cs-native-ad-card-with-cta, cs-native-ad-card-va-phase2, cs-native-ad-card-default"))||[]}(t);null===(e=window.ssrAdData)||void 0===e||e.forEach(((e,o)=>{gt(e.beaconsJson,lt.adServed);let r=ft(i,e.id,o,n);if(!r){var a,s,c,d;if(n)r=0==o?null==t||null===(a=t.shadowRoot)||void 0===a?void 0:a.querySelector("#nativead-river-2"):null==t||null===(s=t.shadowRoot)||void 0===s?void 0:s.querySelector("#nativead-river-1");else r=0==o?null==t||null===(c=t.shadowRoot)||void 0===c?void 0:c.querySelector("#nativead-river-1"):null==t||null===(d=t.shadowRoot)||void 0===d?void 0:d.querySelector("#nativead-resriver-1");if(!r){const t=function(e){const t=[];var n,o;return e?null===(n=document.querySelector("edge-chromium-page"))||void 0===n||null===(n=n.shadowRoot)||void 0===n||null===(n=n.querySelector("waterfall-view-feed"))||void 0===n||null===(n=n.shadowRoot)||void 0===n||null===(n=n.querySelectorAll("cs-super-container"))||void 0===n||n.forEach((e=>{var n;null===(n=e.shadowRoot)||void 0===n||null===(n=n.querySelectorAll("cs-responsive-feed-layout"))||void 0===n||n.forEach((e=>{let n=wt(e,"cs-native-ad-card, cs-native-ad-card-with-cta, cs-native-ad-card-va-phase2, cs-native-ad-card-default");var o,i;n.length>0?null===(o=n)||void 0===o||o.forEach((e=>{t.push(e)})):(n=wt(e,"cs-responsive-card"),null===(i=n)||void 0===i||i.forEach((e=>{var n;null!=e&&null!==(n=e.id)&&void 0!==n&&n.startsWith("nativead")&&t.push(e)})))}))})):null===(o=document.querySelector("edge-chromium-page"))||void 0===o||null===(o=o.shadowRoot)||void 0===o||null===(o=o.querySelector("grid-view-feed"))||void 0===o||null===(o=o.shadowRoot)||void 0===o||null===(o=o.querySelectorAll("cs-super-container"))||void 0===o||o.forEach((e=>{var n;null===(n=e.shadowRoot)||void 0===n||null===(n=n.querySelectorAll(ht))||void 0===n||n.forEach((e=>{var n;null===(n=e.shadowRoot)||void 0===n||null===(n=n.querySelectorAll("cs-feed-layout"))||void 0===n||n.forEach((e=>{var n;null===(n=e.shadowRoot)||void 0===n||null===(n=n.querySelectorAll("cs-native-ad-card, cs-native-ad-card-with-cta, cs-native-ad-card-va-phase2, cs-native-ad-card-default"))||void 0===n||n.forEach((e=>{t.push(e)}))}))}))})),t}(n);r=ft(t,e.id,o,n)}if(!r){var l,u,h,m;if(window.customSectionRows)return;const r=(null==t||null===(l=t.shadowRoot)||void 0===l||null===(l=l.children)||void 0===l?void 0:l.length)||0,a=[];for(let e=0;e<r;e++){var w;a.push(null==t||null===(w=t.shadowRoot)||void 0===w||null===(w=w.children)||void 0===w||null===(w=w.item(e))||void 0===w?void 0:w.tagName)}const s=n?(null===(u=i[o])||void 0===u||null===(u=u.shadowRoot)||void 0===u||null===(u=u.querySelector("cs-responsive-card"))||void 0===u?void 0:u.outerHTML)||(null===(h=i[o])||void 0===h||null===(h=h.shadowRoot)||void 0===h||null===(h=h.querySelector("cs-card"))||void 0===h?void 0:h.outerHTML)||"":(null===(m=i[o])||void 0===m||null===(m=m.shadowRoot)||void 0===m||null===(m=m.querySelector("cs-card"))||void 0===m?void 0:m.outerHTML)||"";return void _("Ad render doesn't match ssr ad data",20193,{renderedCardTags:JSON.stringify(a),adDataId:e.id,renderedId:JSON.stringify(s)})}}window.adsListened?window.adsListened.push(r.id):window.adsListened=[r.id],r.addEventListener("click",(t=>{const n=t.composedPath();for(let e=0;e<7&&e<n.length;e++){const t=n[e];if(t.className&&ut.includes(t.className.replace(/\s/g,"")))return}gt(e.beaconsJson,lt.click,e.clickBeaconJson)}));new IntersectionObserver(pt(e.beaconsJson),{root:null,rootMargin:"0px",threshold:.5}).observe(r)}))}const pt=e=>(t,n)=>{t&&t.forEach((t=>{t.intersectionRatio>=.5&&window.setTimeout((()=>{gt(e,lt.visibility)}),1e3,n,t.target)}))};function gt(e,t,n){var o;if(null!=e&&e.length)try{const a=JSON.parse(e);let s;switch(t){case lt.adServed:s=a&&a.trb;break;case lt.visibility:s=a&&a.tvb;break;case lt.click:s=n&&(null===(o=JSON.parse(n))||void 0===o?void 0:o.tcb)}for(let e=0;e<s.length;e++){var i,r;const n=s[e];t===lt.visibility&&null!==(i=window.viewedBeaconUrls)&&void 0!==i&&i.includes(n)||t===lt.adServed&&null!==(r=window.servedBeaconUrls)&&void 0!==r&&r.includes(n)||yt(n,t,a.e)}}catch(t){_(`Fail to fire ad served call, Fail to parse beacon json tracking data: ${e}`,20179,{error:t.message})}}function yt(e,t,n){n||(e=decodeURIComponent(e)),e&&function(e,t){try{let t=new Image(1,1);t.src=e,t=null}catch(t){_(`Invalid beacon URL, Fail to parse beacon json tracking data: ${e}`,20189,{error:t.message})}finally{t===lt.visibility?window.viewedBeaconUrls?window.viewedBeaconUrls.push(e):window.viewedBeaconUrls=[e]:t==lt.adServed&&(window.servedBeaconUrls?window.servedBeaconUrls.push(e):window.servedBeaconUrls=[e])}}(e,t)}performance.mark("ssrExt"),(()=>{const e=location.search.toLowerCase().indexOf("ssronly=true")>-1;if(e&&(window.SSRONLY=e),window.isSSREnabled){history.scrollRestoration="manual",window.setLiteTelemetryContract=te,window.sendLitePV=We,window.standbyClickEventsHandler=it,window.addEventListener("click",window.standbyClickEventsHandler),window.addEventListener("auxclick",window.standbyClickEventsHandler),window.addEventListener("contextmenu",window.standbyClickEventsHandler),window.searchFormSubmitListener=rt,window.sendAdBeacon=vt,window.ssrLoadedExperience=new at,window.ssrLoadedBundles=new at,window.publishLoadedBundles=window.ssrLoadedExperience.bulkPublish.bind(window.ssrLoadedExperience),window.updateIdxId=ie,dt();try{let e="X";const n=ot();n&&(e=nt(),window.updatedRequestId=e,t=e.toUpperCase(),Z=t);const o=document.head.dataset&&document.head.dataset.clientSettings||"{}",i=JSON.parse(o),r=i.aid||"X";window.swFeatTmplContents={aid:r,newRid:e,responseCached:Number(n)};const a=i.requestMuid;oe=()=>`sw-rid-log:${r}|${e}|${Number(n)};requestMuid:${a};`}catch(e){_("Exception occurred while running the RID swap logic in the edgeNext SSR-extension",34031,{error:e.message})}var t;window.addEventListener("TTSR.SearchBox",(()=>{try{const e=window._sugi?document.querySelector("cs-ntp").shadowRoot.querySelector("cs-searchbox").shadowRoot.querySelector("form"):document.querySelector("edge-chromium-page").shadowRoot.querySelector("cs-header-core").shadowRoot.querySelector("common-search-box-edgenext").shadowRoot.querySelector("cs-common-search-box").shadowRoot.querySelector("form");if(!e)throw"Search box form element not found";e.addEventListener("submit",window.searchFormSubmitListener)}catch(e){_("Exception occurred while adding search box form submit event listener",34018,{error:e.message})}}),{once:!0}),window.addEventListener("TTSR.HeaderTag",(e=>{try{const e=["ms-rewards","notification-bell","common-settings-edgenext"],t=(e,t)=>{var n;return null===(n=document.getElementsByTagName(e)[0])||void 0===n||null===(n=n.shadowRoot)||void 0===n?void 0:n.querySelector(t).shadowRoot},n=t("edge-chromium-page","cs-header-core")||t("ruby-page","cs-ruby-header-core");for(const t of e){const e=n.querySelector(t);e&&(e.removeAttribute("needs-hydration"),e.setAttribute("needs-recreation",""))}}catch(e){_("SSR header components not found",20203,{error:e.message})}})),window.addEventListener("TTSR.TopSitesTag",(()=>{var e,t;const n=(null===(e=document.getElementsByTagName("edge-chromium-page")[0])||void 0===e?void 0:e.shadowRoot.querySelector("top-sites-edgenext"))||(null===(t=document.getElementsByTagName("ruby-page")[0])||void 0===t?void 0:t.shadowRoot.querySelector("top-sites-edgenext"));if(!n)return;let o;n.removeAttribute("needs-hydration"),n.setAttribute("needs-recreation","");try{o=JSON.parse(localStorage["TSNP1.topsites"])}catch(e){return}const i=n.shadowRoot,r=null==i?void 0:i.querySelectorAll("div.pill-top-site:not(.add-placeholder)");if((null==r?void 0:r.length)>0){const e=Math.min(r.length,o.length);for(let t=0;t<e;t++){const e=o[t],n=r[t];e.contentViewTelemetryTag&&n.setAttribute("data-t",e.contentViewTelemetryTag),n.setAttribute("title",e.title),n.setAttribute("aria-label",e.title),n.querySelector(".image img").setAttribute("src",e.faviconUrl);const i=n.querySelector("a.control");i.setAttribute("href",e.url),e.anchorTelemetryTag?i.setAttribute("data-t",e.anchorTelemetryTag):_("No anchorTelemetryTag",34021,{error:`contentViewTelemetryTag is ${n.getAttribute("data-t")}`}),n.querySelector("a.control .top-site-title span").innerText=e.title}if(r.length>o.length)for(let t=e;t<r.length;t++)r[t].remove();return void window.markTTSR("TTSR.TopSitesEdgeNextWC")}const a=null==i?void 0:i.querySelectorAll("a.pill-top-site");if((null==a?void 0:a.length)>0){const e=Math.min(a.length,o.length);for(let t=0;t<e;t++){const e=o[t],n=a[t];n.setAttribute("href",e.url),n.setAttribute("title",e.title),n.setAttribute("aria-label",e.title),n.querySelector(".left-part img").setAttribute("src",e.faviconUrl),n.querySelector(".left-part span").innerText=e.title,e.anchorTelemetryTag&&n.setAttribute("data-t",e.anchorTelemetryTag)}if(a.length>o.length)for(let t=e;t<a.length;t++)a[t].remove();window.markTTSR("TTSR.TopSitesEdgeNextWC")}else;}),{once:!0}),window.addEventListener("TTSR.WelcomeGreetingLight",(()=>{try{const e=document.getElementsByTagName("edge-chromium-page")[0].shadowRoot,t=e.querySelector("cs-header-core").shadowRoot.querySelector("#WGPlaceHolder");if(t){const n=e.querySelector("#WelcomeGreetingHidden");t.replaceWith(n.querySelector("welcome-greeting-light")),n.remove()}}catch(e){_("SSR WelcomeGreetingLight components not found",34032,{error:e.message})}})),window.isResized=!1,window.addEventListener("resize",(()=>window.isResized=!0),{once:!0}),window._sugi&&(window.document.addEventListener("DOMContentLoaded",(()=>{if(!window.isSSRCompleted){const e=new URL(window.location.href);e.searchParams.append("csronly","true"),window.location.href=e.toString()}}),{once:!0}),window._sugiRenderedComponents=new at)}})(),performance.measure("ssrExt","ssrExt")}();